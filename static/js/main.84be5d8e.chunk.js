(this.webpackJsonpchess_app=this.webpackJsonpchess_app||[]).push([[0],[,,,,,,,,,,function(e){e.exports=JSON.parse('{"Movement":[{"name":"Rook","description":"Moves in straight lines","icon":"wR","lessons":[{"fen":"8/8/8/8/8/8/8/R7 w - - 0 78","highlighted_squares":[],"arrows":[{"from":"a1","to":"a8"},{"from":"a1","to":"h1"}],"instruction":"The rook moves in straight line as highlighted"},{"fen":"8/8/8/8/8/8/8/R7 w - - 0 78","highlighted_squares":["a8","h1"],"arrows":[],"instruction":"Move the rook to highlighted squares"},{"fen":"8/8/8/8/8/8/8/R7 w - - 0 78","highlighted_squares":["h8"],"arrows":[{"from":"a1","to":"a8"},{"from":"a8","to":"h8"}],"instruction":"Drag the rook to the highlighte square"}]},{"name":"King","description":"Moves on square all direction","icon":"wK"},{"name":"knight","description":"Moves in L shape","icon":"wN"},{"name":"Bishop","description":"Moves diagonaly","icon":"wB"},{"name":"Queen","description":"moves=rook + bishop","icon":"wQ"},{"name":"Pawn","description":"moves 1 quare foward","icon":"wP"}],"Captures":[{"name":"Rook","description":"Moves in straight lines","icon":"wR"},{"name":"King","description":"Moves on square all direction","icon":"wK"},{"name":"knight","description":"Moves in L shape","icon":"wN"},{"name":"Bishop","description":"Moves diagonaly","icon":"wB"},{"name":"Queen","description":"moves=rook + bishop","icon":"wQ"},{"name":"Pawn","description":"moves 1 quare foward","icon":"wP"}],"Funtamentals":[{"name":"Protection","description":"protect your pieces"},{"name":"smothered Mate","description":"Recognize the patterns"},{"name":"dovetail Mate","description":"Recognize the patterns"},{"name":"anastasia Mate","description":"Recognize the patterns"},{"name":"arabian Mate","description":"Recognize the patterns"},{"name":"hook Mate","description":"Recognize the patterns"}],"defence":[{"name":"defensive Move","description":"defend"}]}')},,,,function(e){e.exports=JSON.parse('{"attacks":[{"name":"xRay Attack","description":" xRays"},{"name":"queenside Attack","description":"queenside Attack"},{"name":"kingside Attack","description":"kingside Attack"}],"basic tactics":[{"name":"fork","description":"Double attack"},{"name":"skewer","description":"skewers"},{"name":"pin","description":"pin"},{"name":"capturing Defender","description":"overloaded piece"},{"name":"discovered Attack","description":"Discovered attacks"},{"name":"double Check","description":"Double check"},{"name":"intermezzo","description":"In-between move"}],"basicmate":[{"name":"back Rank Mate","description":"basic checkmate"},{"name":"mate In 4","description":"basic checkmate"},{"name":"double Bishop Mate","description":"basic checkmate"},{"name":"mate In 5","description":"basic checkmate"},{"name":"mate In 3","description":"basic checkmate"},{"name":"mate In 2","description":"basic checkmate"},{"name":"mate","description":"basic checkmate"},{"name":"back Rank Mate","description":"basic checkmate"},{"name":"mate In 1","description":"basic checkmate"}],"checkmate":[{"name":"boden Mate","description":"Recognize the patterns"},{"name":"smothered Mate","description":"Recognize the patterns"},{"name":"dovetail Mate","description":"Recognize the patterns"},{"name":"anastasia Mate","description":"Recognize the patterns"},{"name":"arabian Mate","description":"Recognize the patterns"},{"name":"hook Mate","description":"Recognize the patterns"}],"defence":[{"name":"defensive Move","description":"defend"}],"endgame":[{"name":"queenRook Endgame","description":"queen and rook Endgame"},{"name":"queen Endgame","description":"queen Endgame"},{"name":"bishop Endgame","description":"bishop Endgame"},{"name":"rook Endgame","description":"rook endgame"},{"name":"pawn Endgame","description":"Promote to win"},{"name":"endgame","description":"endgame"},{"name":"knight Endgame","description":"Horsing"}],"intermediate tactics":[{"name":"deflection","description":"deflection"},{"name":"zugzwang","description":"Forced move"},{"name":"sacrifice","description":"sacrifice piece"},{"name":"quiet Move","description":"Waiting move"},{"name":"interference","description":"Interpose a piece to great effect"}],"middlegame":[{"name":"middlegame","description":"middlegame"}],"opening":[{"name":"opening","description":"opening"}]}')},function(e,t,s){},function(e,t,s){},,function(e){e.exports=JSON.parse('{"name":"Rook","description":"Moves in straight lines","icon":"wR","lessons":[{"fen":"8/8/8/8/8/8/8/R6R w - - 0 78","instruction":"Each player starts the game with two rooks, one on each of the corner squares on their own side of the board. ","highlighted":false,"arrows":false,"action":false},{"fen":"r6r/8/8/8/8/8/8/R6R w - - 0 78","instruction":"The white rooks start on squares a1 and h1, while the black rooks start on a8 and h8.","highlighted":false,"arrows":false,"action":false},{"fen":"8/8/8/8/4R3/8/8/8 w - - 0 78","instruction":"The rook moves horizontally or vertically, through any number of unoccupied squares (see diagram). The rook cannot jump over pieces.","highlighted":true,"arrows":false,"action":"random_move"},{"fen":"8/8/8/8/4R3/8/8/8 w - - 0 78","instruction":"Move the rook to highlighted square.","highlighted":true,"arrows":true,"action":"try_easy"},{"fen":"8/8/8/8/4R3/8/8/8 w - - 0 78","instruction":"Move the rook to highlighted square.","highlighted":true,"arrows":true,"action":"try_hard","moveTo":"a8"}]}')},,,,,function(e,t,s){},function(e,t,s){},,,,,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var i=s(1),a=s.n(i),r=s(17),n=s.n(r),o=(s(23),s(24),s(7)),c="/",l="/play-computer/",d="/puzzles/",h="/practice/",u="/train/",m="/stats/",p="/board-editor/",v="/create-puzzle/",b="/learn/practice/",j=s(0);var f=function(e){var t=e.children,s=function(){document.querySelector(".sidebar").classList.toggle("open")};return Object(j.jsxs)("div",{className:"layout",children:[Object(j.jsxs)("div",{className:"sidebar",onClick:s,children:[Object(j.jsxs)("div",{className:"sidebar__top",children:[Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{className:"header",children:"Learn"}),Object(j.jsx)("li",{children:Object(j.jsxs)(o.b,{to:u,children:[Object(j.jsx)("span",{className:"material-icons",children:"lightbulb"})," Basics"]})}),Object(j.jsx)("li",{children:Object(j.jsxs)(o.b,{to:h,children:[Object(j.jsx)("span",{className:"material-icons",children:"self_improvement"})," ","Practice"]})}),Object(j.jsx)("li",{children:Object(j.jsxs)(o.b,{to:d,children:[Object(j.jsx)("span",{className:"material-icons",children:"track_changes"})," Puzzles"]})})]}),Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{className:"header",children:"Play"}),Object(j.jsx)("li",{children:Object(j.jsxs)(o.b,{to:l,children:[Object(j.jsx)("span",{className:"material-icons",children:"computer"})," Computer"]})})]}),Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{className:"header",children:"Your Stats"}),Object(j.jsx)("li",{children:Object(j.jsxs)(o.b,{to:m,children:[Object(j.jsx)("span",{className:"material-icons",children:"cloud_download"}),"Import Games"]})})]}),Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{className:"header",children:"Tools"}),Object(j.jsx)("li",{children:Object(j.jsxs)(o.b,{to:v,children:[Object(j.jsx)("span",{className:"material-icons",children:"add_circle_outline"}),"Create puzzle"]})}),Object(j.jsx)("li",{children:Object(j.jsxs)(o.b,{to:p,children:[Object(j.jsx)("span",{className:"material-icons",children:"grid_view"}),"Board editor"]})})]})]}),Object(j.jsxs)("div",{className:"profile",children:[Object(j.jsx)("span",{children:"Player "}),Object(j.jsx)("span",{className:"material-icons",children:"settings"})]})]}),Object(j.jsxs)("div",{className:"sidebar__offset main",children:[Object(j.jsx)("nav",{className:"navar",children:Object(j.jsx)("div",{className:"sidebar__open",children:Object(j.jsx)("i",{className:"material-icons",onClick:s,children:"menu"})})}),t]})]})},x=s(9),g=s(3);s(15);var k=function(e){var t=e.user;return Object(j.jsxs)("div",{className:"game__user",children:[Object(j.jsx)("div",{className:"",children:Object(j.jsx)("div",{className:"name",children:t.username})}),Object(j.jsx)("div",{children:Object(j.jsx)("div",{className:"clk",id:"time"+t.id,children:"0:00:00"})})]})},w=s(4),y=s(5),O={waitForInputStart:0,pieceClickedThreshold:1,clickTo:2,secondClickThreshold:3,dragTo:4,clickDragTo:5,moveDone:6,reset:7},_="secondClick",M="movedOutOfBoard",C="draggedBack",S="clickedAnotherPiece",I=function(){function e(t,s,i,a){Object(w.a)(this,e),this.view=t,this.chessboard=t.chessboard,this.moveStartCallback=s,this.moveDoneCallback=i,this.moveCanceledCallback=a,this.setMoveInputState(O.waitForInputStart)}return Object(y.a)(e,[{key:"setMoveInputState",value:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=this.moveInputState;switch(this.moveInputState=e,e){case O.waitForInputStart:break;case O.pieceClickedThreshold:if(O.waitForInputStart!==i&&O.clickTo!==i)throw new Error("moveInputState");if(this.pointerMoveListener&&(window.removeEventListener(this.pointerMoveListener.type,this.pointerMoveListener),this.pointerMoveListener=void 0),this.pointerUpListener&&(window.removeEventListener(this.pointerUpListener.type,this.pointerUpListener),this.pointerUpListener=void 0),this.startIndex=s.index,this.endIndex=void 0,this.movedPiece=s.piece,this.updateStartEndMarkers(),this.startPoint=s.point,this.pointerMoveListener||this.pointerUpListener)throw Error("_pointerMoveListener or _pointerUpListener");if("mousedown"===s.type)this.pointerMoveListener=this.onPointerMove.bind(this),this.pointerMoveListener.type="mousemove",window.addEventListener("mousemove",this.pointerMoveListener),this.pointerUpListener=this.onPointerUp.bind(this),this.pointerUpListener.type="mouseup",window.addEventListener("mouseup",this.pointerUpListener);else{if("touchstart"!==s.type)throw Error("event type");this.pointerMoveListener=this.onPointerMove.bind(this),this.pointerMoveListener.type="touchmove",window.addEventListener("touchmove",this.pointerMoveListener),this.pointerUpListener=this.onPointerUp.bind(this),this.pointerUpListener.type="touchend",window.addEventListener("touchend",this.pointerUpListener)}break;case O.clickTo:this.draggablePiece&&(z.removeElement(this.draggablePiece),this.draggablePiece=void 0),i===O.dragTo&&this.view.setPieceVisibility(s.index);break;case O.secondClickThreshold:if(O.clickTo!==i)throw new Error("moveInputState");this.startPoint=s.point;break;case O.dragTo:if(O.pieceClickedThreshold!==i)throw new Error("moveInputState");this.view.chessboard.state.inputEnabled&&(this.view.setPieceVisibility(s.index,!1),this.createDraggablePiece(s.piece));break;case O.clickDragTo:if(O.secondClickThreshold!==i)throw new Error("moveInputState");this.view.chessboard.state.inputEnabled&&(this.view.setPieceVisibility(s.index,!1),this.createDraggablePiece(s.piece));break;case O.moveDone:if(-1===[O.dragTo,O.clickTo,O.clickDragTo].indexOf(i))throw new Error("moveInputState");if(this.endIndex=s.index,this.endIndex&&this.moveDoneCallback(this.startIndex,this.endIndex)){var a=this.chessboard.state.squares.slice(0);this.chessboard.state.setPiece(this.startIndex,void 0),this.chessboard.state.setPiece(this.endIndex,this.movedPiece),i===O.clickTo?(this.updateStartEndMarkers(),this.view.animatePieces(a,this.chessboard.state.squares.slice(0),(function(){t.setMoveInputState(O.reset)}))):(this.view.drawPieces(this.chessboard.state.squares),this.setMoveInputState(O.reset))}else this.view.drawPieces(),this.setMoveInputState(O.reset);break;case O.reset:this.startIndex&&!this.endIndex&&this.movedPiece&&this.chessboard.state.setPiece(this.startIndex,this.movedPiece),this.startIndex=void 0,this.endIndex=void 0,this.movedPiece=void 0,this.updateStartEndMarkers(),this.draggablePiece&&(z.removeElement(this.draggablePiece),this.draggablePiece=void 0),this.pointerMoveListener&&(window.removeEventListener(this.pointerMoveListener.type,this.pointerMoveListener),this.pointerMoveListener=void 0),this.pointerUpListener&&(window.removeEventListener(this.pointerUpListener.type,this.pointerUpListener),this.pointerUpListener=void 0),this.setMoveInputState(O.waitForInputStart);break;default:throw Error("moveInputState ".concat(e))}}},{key:"createDraggablePiece",value:function(e){if(this.draggablePiece)throw Error("draggablePiece exists");this.draggablePiece=z.createSvg(document.body),this.draggablePiece.classList.add("cm-chessboard-draggable-piece"),this.draggablePiece.setAttribute("width",this.view.squareWidth),this.draggablePiece.setAttribute("height",this.view.squareHeight),this.draggablePiece.setAttribute("style","pointer-events: none"),this.draggablePiece.name=e;var t=this.chessboard.props.sprite.cache?"":this.chessboard.props.sprite.url,s=z.addElement(this.draggablePiece,"use",{href:"".concat(t,"#").concat(e)}),i=this.view.squareHeight/this.chessboard.props.sprite.size,a=this.draggablePiece.createSVGTransform();a.setScale(i,i),s.transform.baseVal.appendItem(a)}},{key:"moveDraggablePiece",value:function(e,t){this.draggablePiece.setAttribute("style","pointer-events: none; position: absolute; left: ".concat(e-this.view.squareHeight/2,"px; top: ").concat(t-this.view.squareHeight/2,"px"))}},{key:"onPointerDown",value:function(e){if("mousedown"===e.type&&0===e.button||"touchstart"===e.type){var t,s,i,a=e.target.getAttribute("data-index"),r=this.view.getPiece(a);if(r&&("w"===(s=(t=r.getAttribute("data-piece"))?t.substr(0,1):void 0)&&this.chessboard.state.inputWhiteEnabled||"b"===s&&this.chessboard.state.inputBlackEnabled)&&e.preventDefault(),a)if(this.moveInputState!==O.waitForInputStart||this.chessboard.state.inputWhiteEnabled&&"w"===s||this.chessboard.state.inputBlackEnabled&&"b"===s)if("mousedown"===e.type?i={x:e.clientX,y:e.clientY}:"touchstart"===e.type&&(i={x:e.touches[0].clientX,y:e.touches[0].clientY}),this.moveInputState===O.waitForInputStart&&t&&this.moveStartCallback(a))this.setMoveInputState(O.pieceClickedThreshold,{index:a,piece:t,point:i,type:e.type});else if(this.moveInputState===O.clickTo)if(a===this.startIndex)this.setMoveInputState(O.secondClickThreshold,{index:a,piece:t,point:i,type:e.type});else{var n=this.chessboard.getPiece(T[a]),o=n?n.substr(0,1):void 0,c=this.chessboard.getPiece(T[this.startIndex]),l=c?c.substr(0,1):void 0;s&&l===o?(this.moveCanceledCallback(S,this.startIndex,a),this.moveStartCallback(a)?this.setMoveInputState(O.pieceClickedThreshold,{index:a,piece:n,point:i,type:e.type}):this.setMoveInputState(O.reset)):this.setMoveInputState(O.moveDone,{index:a})}}}},{key:"onPointerMove",value:function(e){var t,s,i,a,r;if("mousemove"===e.type?(i=e.clientX,a=e.clientY,t=e.pageX,s=e.pageY,r=e.target):"touchmove"===e.type&&(i=e.touches[0].clientX,a=e.touches[0].clientY,t=e.touches[0].pageX,s=e.touches[0].pageY,r=document.elementFromPoint(i,a)),this.moveInputState===O.pieceClickedThreshold||this.moveInputState===O.secondClickThreshold)(Math.abs(this.startPoint.x-i)>4||Math.abs(this.startPoint.y-a)>4)&&(this.moveInputState===O.secondClickThreshold?this.setMoveInputState(O.clickDragTo,{index:this.startIndex,piece:this.movedPiece}):this.setMoveInputState(O.dragTo,{index:this.startIndex,piece:this.movedPiece}),this.view.chessboard.state.inputEnabled&&this.moveDraggablePiece(t,s));else if(this.moveInputState===O.dragTo||this.moveInputState===O.clickDragTo||this.moveInputState===O.clickTo){if(r&&r.getAttribute&&r.parentElement===this.view.boardGroup){var n=r.getAttribute("data-index");n!==this.startIndex&&n!==this.endIndex?(this.endIndex=n,this.updateStartEndMarkers()):n===this.startIndex&&void 0!==this.endIndex&&(this.endIndex=void 0,this.updateStartEndMarkers())}else void 0!==this.endIndex&&(this.endIndex=void 0,this.updateStartEndMarkers());!this.view.chessboard.state.inputEnabled||this.moveInputState!==O.dragTo&&this.moveInputState!==O.clickDragTo||this.moveDraggablePiece(t,s)}}},{key:"onPointerUp",value:function(e){var t;if("mouseup"===e.type?t=e.target:"touchend"===e.type&&(t=document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY)),t&&t.getAttribute){var s=t.getAttribute("data-index");if(s)this.moveInputState===O.dragTo||this.moveInputState===O.clickDragTo?this.startIndex===s?this.moveInputState===O.clickDragTo?(this.chessboard.state.setPiece(this.startIndex,this.movedPiece),this.view.setPieceVisibility(this.startIndex),this.moveCanceledCallback(C,s,s),this.setMoveInputState(O.reset)):this.setMoveInputState(O.clickTo,{index:s}):this.setMoveInputState(O.moveDone,{index:s}):this.moveInputState===O.pieceClickedThreshold?this.setMoveInputState(O.clickTo,{index:s}):this.moveInputState===O.secondClickThreshold&&(this.setMoveInputState(O.reset),this.moveCanceledCallback(_,s,s));else{this.view.drawPieces();var i=this.startIndex;this.setMoveInputState(O.reset),this.moveCanceledCallback(M,i,void 0)}}else this.view.drawPieces(),this.setMoveInputState(O.reset)}},{key:"updateStartEndMarkers",value:function(){this.chessboard.props.style.moveFromMarker&&this.chessboard.state.removeMarkers(void 0,this.chessboard.props.style.moveFromMarker),this.chessboard.props.style.moveToMarker&&this.chessboard.state.removeMarkers(void 0,this.chessboard.props.style.moveToMarker),this.chessboard.props.style.moveFromMarker&&this.startIndex&&this.chessboard.state.addMarker(this.startIndex,this.chessboard.props.style.moveFromMarker),this.chessboard.props.style.moveToMarker&&this.endIndex&&this.chessboard.state.addMarker(this.endIndex,this.chessboard.props.style.moveToMarker),this.view.drawMarkers()}},{key:"reset",value:function(){this.setMoveInputState(O.reset)}},{key:"destroy",value:function(){this.reset()}}]),e}(),P=0,N=1,q=2,E=function(){function e(t,s,i,a,r){Object(w.a)(this,e),this.view=t,s&&i&&(this.animatedElements=this.createAnimation(s,i),this.duration=a,this.callback=r,this.frameHandle=requestAnimationFrame(this.animationStep.bind(this)))}return Object(y.a)(e,[{key:"seekChanges",value:function(e,t){for(var s=this,i=[],a=[],r=[],n=0;n<64;n++){var o=e[n],c=t[n];c!==o&&(c&&i.push({piece:c,index:n}),o&&a.push({piece:o,index:n}))}return i.forEach((function(e){var t=8,i=void 0;a.forEach((function(a){if(e.piece===a.piece){var r=s.squareDistance(e.index,a.index);r<t&&(i=a,t=r)}})),i?(a.splice(a.indexOf(i),1),r.push({type:P,piece:e.piece,atIndex:i.index,toIndex:e.index})):r.push({type:N,piece:e.piece,atIndex:e.index})})),a.forEach((function(e){r.push({type:q,piece:e.piece,atIndex:e.index})})),r}},{key:"createAnimation",value:function(e,t){var s=this,i=this.seekChanges(e,t),a=[];return i.forEach((function(e){var t={type:e.type};switch(e.type){case P:t.element=s.view.getPiece(e.atIndex),t.atPoint=s.view.squareIndexToPoint(e.atIndex),t.toPoint=s.view.squareIndexToPoint(e.toIndex);break;case N:t.element=s.view.drawPiece(e.atIndex,e.piece),t.element.style.opacity=0;break;case q:t.element=s.view.getPiece(e.atIndex)}a.push(t)})),a}},{key:"animationStep",value:function(e){var t=this;this.startTime||(this.startTime=e);var s=e-this.startTime;if(!(s<=this.duration))return cancelAnimationFrame(this.frameHandle),void this.callback();this.frameHandle=requestAnimationFrame(this.animationStep.bind(this));var i=Math.min(1,s/this.duration),a=i<.5?2*i*i:(4-2*i)*i-1;this.animatedElements.forEach((function(e){if(e.element)switch(e.type){case P:e.element.transform.baseVal.removeItem(0);var s=t.view.svg.createSVGTransform();s.setTranslate(e.atPoint.x+(e.toPoint.x-e.atPoint.x)*a,e.atPoint.y+(e.toPoint.y-e.atPoint.y)*a),e.element.transform.baseVal.appendItem(s);break;case N:e.element.style.opacity=a;break;case q:e.element.style.opacity=1-a}else console.warn("animatedItem has no element",e)}))}},{key:"squareDistance",value:function(e,t){var s=e%8,i=Math.floor(e/8),a=t%8,r=Math.floor(t/8);return Math.max(Math.abs(r-i),Math.abs(a-s))}}]),e}(),T=["a1","b1","c1","d1","e1","f1","g1","h1","a2","b2","c2","d2","e2","f2","g2","h2","a3","b3","c3","d3","e3","f3","g3","h3","a4","b4","c4","d4","e4","f4","g4","h4","a5","b5","c5","d5","e5","f5","g5","h5","a6","b6","c6","d6","e6","f6","g6","h6","a7","b7","c7","d7","e7","f7","g7","h7","a8","b8","c8","d8","e8","f8","g8","h8"],L=function(){function e(t,s){var i=this;Object(w.a)(this,e),this.animationRunning=!1,this.currentAnimation=void 0,this.chessboard=t,this.moveInput=new I(this,this.moveStartCallback.bind(this),this.moveDoneCallback.bind(this),this.moveCanceledCallback.bind(this)),this.animationQueue=[],t.props.sprite.cache&&this.cacheSprite(),t.props.responsive&&("undefined"!==typeof ResizeObserver?(this.resizeObserver=new ResizeObserver((function(){i.handleResize()})),this.resizeObserver.observe(this.chessboard.element)):(this.resizeListener=this.handleResize.bind(this),window.addEventListener("resize",this.resizeListener))),this.pointerDownListener=this.pointerDownHandler.bind(this),this.chessboard.element.addEventListener("mousedown",this.pointerDownListener),this.chessboard.element.addEventListener("touchstart",this.pointerDownListener),this.createSvgAndGroups(),this.updateMetrics(),s(this),t.props.responsive&&this.handleResize()}return Object(y.a)(e,[{key:"pointerDownHandler",value:function(e){this.moveInput.onPointerDown(e)}},{key:"destroy",value:function(){this.moveInput.destroy(),this.resizeObserver&&this.resizeObserver.unobserve(this.chessboard.element),this.resizeListener&&window.removeEventListener("resize",this.resizeListener),this.chessboard.element.removeEventListener("mousedown",this.pointerDownListener),this.chessboard.element.removeEventListener("touchstart",this.pointerDownListener),z.removeElement(this.svg),this.animationQueue=[],this.currentAnimation&&cancelAnimationFrame(this.currentAnimation.frameHandle)}},{key:"cacheSprite",value:function(){var e="chessboardSpriteCache";if(!document.getElementById(e)){var t=document.createElement("div");t.style.display="none",t.id=e,document.body.appendChild(t);var s=new XMLHttpRequest;s.open("GET",this.chessboard.props.sprite.url,!0),s.onload=function(){t.insertAdjacentHTML("afterbegin",s.response)},s.send()}}},{key:"createSvgAndGroups",value:function(){this.svg&&z.removeElement(this.svg),this.svg=z.createSvg(this.chessboard.element);var e=this.chessboard.props.style.cssClass?this.chessboard.props.style.cssClass:"default";this.svg.setAttribute("class","cm-chessboard border-type-"+this.chessboard.props.style.borderType+" "+e),this.updateMetrics(),this.boardGroup=z.addElement(this.svg,"g",{class:"board"}),this.coordinatesGroup=z.addElement(this.svg,"g",{class:"coordinates"}),this.markersGroup=z.addElement(this.svg,"g",{class:"markers"}),this.piecesGroup=z.addElement(this.svg,"g",{class:"pieces"})}},{key:"updateMetrics",value:function(){this.width=this.chessboard.element.clientWidth,this.height=this.chessboard.element.clientHeight,this.chessboard.props.style.borderType===H.frame?this.borderSize=this.width/25:this.chessboard.props.style.borderType===H.thin?this.borderSize=this.width/320:this.borderSize=0,this.innerWidth=this.width-2*this.borderSize,this.innerHeight=this.height-2*this.borderSize,this.squareWidth=this.innerWidth/8,this.squareHeight=this.innerHeight/8,this.scalingX=this.squareWidth/this.chessboard.props.sprite.size,this.scalingY=this.squareHeight/this.chessboard.props.sprite.size,this.pieceXTranslate=this.squareWidth/2-this.chessboard.props.sprite.size*this.scalingY/2}},{key:"handleResize",value:function(){this.chessboard.props.style.aspectRatio&&(this.chessboard.element.style.height=this.chessboard.element.clientWidth*this.chessboard.props.style.aspectRatio+"px"),this.chessboard.element.clientWidth===this.width&&this.chessboard.element.clientHeight===this.height||(this.updateMetrics(),this.redraw()),this.svg.setAttribute("width","100%"),this.svg.setAttribute("height","100%")}},{key:"redraw",value:function(){this.drawBoard(),this.drawCoordinates(),this.drawMarkers(),this.setCursor(),this.drawPieces(this.chessboard.state.squares)}},{key:"drawBoard",value:function(){for(;this.boardGroup.firstChild;)this.boardGroup.removeChild(this.boardGroup.lastChild);if(this.chessboard.props.style.borderType!==H.none&&(z.addElement(this.boardGroup,"rect",{width:this.width,height:this.height}).setAttribute("class","border"),this.chessboard.props.style.borderType===H.frame)){var e=this.borderSize;z.addElement(this.boardGroup,"rect",{x:e,y:e,width:this.width-2*e,height:this.height-2*e}).setAttribute("class","border-inner")}for(var t=0;t<64;t++){var s=this.chessboard.state.orientation===D.white?t:63-t,i="square ".concat(0===(9*s&8)?"black":"white"),a=this.squareIndexToPoint(s),r=z.addElement(this.boardGroup,"rect",{x:a.x,y:a.y,width:this.squareWidth,height:this.squareHeight});r.setAttribute("class",i),r.setAttribute("data-index",""+s)}}},{key:"drawCoordinates",value:function(){if(this.chessboard.props.style.showCoordinates){for(;this.coordinatesGroup.firstChild;)this.coordinatesGroup.removeChild(this.coordinatesGroup.lastChild);for(var e=this.chessboard.props.style.borderType!==H.frame,t=0;t<8;t++){var s=this.borderSize+(17+this.chessboard.props.sprite.size*t)*this.scalingX,i=this.height-3.5*this.scalingY,a="coordinate file";e&&(s+=15.5*this.scalingX,a+=t%2?" white":" black");var r=z.addElement(this.coordinatesGroup,"text",{class:a,x:s,y:i,style:"font-size: ".concat(10*this.scalingY,"px")});this.chessboard.state.orientation===D.white?r.textContent=String.fromCharCode(97+t):r.textContent=String.fromCharCode(104-t)}for(var n=0;n<8;n++){var o=this.borderSize/3.7,c=this.borderSize+25*this.scalingY+n*this.squareHeight,l="coordinate rank";e&&(l+=n%2?" black":" white",this.chessboard.props.style.borderType===H.frame?(o+=10*this.scalingX,c-=15*this.scalingY):(o+=2*this.scalingX,c-=15*this.scalingY));var d=z.addElement(this.coordinatesGroup,"text",{class:l,x:o,y:c,style:"font-size: ".concat(10*this.scalingY,"px")});this.chessboard.state.orientation===D.white?d.textContent=""+(8-n):d.textContent=""+(1+n)}}}},{key:"drawPieces",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chessboard.state.squares,t=Array.from(this.piecesGroup.childNodes),s=0;s<64;s++){var i=e[s];i&&this.drawPiece(s,i)}for(var a=0,r=t;a<r.length;a++){var n=r[a];this.piecesGroup.removeChild(n)}}},{key:"drawPiece",value:function(e,t){var s=z.addElement(this.piecesGroup,"g");s.setAttribute("data-piece",t),s.setAttribute("data-index",e);var i=this.squareIndexToPoint(e),a=this.svg.createSVGTransform();a.setTranslate(i.x,i.y),s.transform.baseVal.appendItem(a);var r=this.chessboard.props.sprite.cache?"":this.chessboard.props.sprite.url,n=z.addElement(s,"use",{href:"".concat(r,"#").concat(t),class:"piece"}),o=this.svg.createSVGTransform();o.setTranslate(this.pieceXTranslate,0),n.transform.baseVal.appendItem(o);var c=this.svg.createSVGTransform();return c.setScale(this.scalingY,this.scalingY),n.transform.baseVal.appendItem(c),s}},{key:"setPieceVisibility",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=this.getPiece(e);t?s.setAttribute("visibility","visible"):s.setAttribute("visibility","hidden")}},{key:"getPiece",value:function(e){return this.piecesGroup.querySelector("g[data-index='".concat(e,"']"))}},{key:"drawMarkers",value:function(){for(var e=this;this.markersGroup.firstChild;)this.markersGroup.removeChild(this.markersGroup.firstChild);this.chessboard.state.markers.forEach((function(t){e.drawMarker(t)}))}},{key:"drawMarker",value:function(e){var t=z.addElement(this.markersGroup,"g");t.setAttribute("data-index",e.index);var s=this.squareIndexToPoint(e.index),i=this.svg.createSVGTransform();i.setTranslate(s.x,s.y),t.transform.baseVal.appendItem(i);var a=this.chessboard.props.sprite.cache?"":this.chessboard.props.sprite.url,r=z.addElement(t,"use",{href:"".concat(a,"#").concat(e.type.slice),class:"marker "+e.type.class}),n=this.svg.createSVGTransform();return n.setScale(this.scalingX,this.scalingY),r.transform.baseVal.appendItem(n),t}},{key:"animatePieces",value:function(e,t,s){this.animationQueue.push({fromSquares:e,toSquares:t,callback:s}),this.animationRunning||this.nextPieceAnimationInQueue()}},{key:"nextPieceAnimationInQueue",value:function(){var e=this,t=this.animationQueue.shift();void 0!==t&&(this.animationRunning=!0,this.currentAnimation=new E(this,t.fromSquares,t.toSquares,this.chessboard.props.animationDuration/(this.animationQueue.length+1),(function(){e.moveInput.draggablePiece?(e.animationRunning=!1,e.nextPieceAnimationInQueue(),t.callback&&t.callback()):(e.drawPieces(t.toSquares),e.animationRunning=!1,e.nextPieceAnimationInQueue(),t.callback&&t.callback())})))}},{key:"enableMoveInput",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;t===D.white?this.chessboard.state.inputWhiteEnabled=!0:(t===D.black||(this.chessboard.state.inputWhiteEnabled=!0),this.chessboard.state.inputBlackEnabled=!0),this.chessboard.state.inputEnabled=!0,this.moveInputCallback=e,this.setCursor()}},{key:"disableMoveInput",value:function(){this.chessboard.state.inputWhiteEnabled=!1,this.chessboard.state.inputBlackEnabled=!1,this.chessboard.state.inputEnabled=!1,this.moveInputCallback=void 0,this.setCursor()}},{key:"moveStartCallback",value:function(e){return!this.moveInputCallback||this.moveInputCallback({chessboard:this.chessboard,type:F.moveStart,square:T[e]})}},{key:"moveDoneCallback",value:function(e,t){return!this.moveInputCallback||this.moveInputCallback({chessboard:this.chessboard,type:F.moveDone,squareFrom:T[e],squareTo:T[t]})}},{key:"moveCanceledCallback",value:function(e,t,s){this.moveInputCallback&&this.moveInputCallback({chessboard:this.chessboard,type:F.moveCanceled,reason:e,squareFrom:T[t],squareTo:s?T[s]:void 0})}},{key:"setCursor",value:function(){this.chessboard.state&&(this.chessboard.state.inputWhiteEnabled||this.chessboard.state.inputBlackEnabled||this.chessboard.state.squareSelectEnabled?this.boardGroup.setAttribute("class","board input-enabled"):this.boardGroup.setAttribute("class","board"))}},{key:"squareIndexToPoint",value:function(e){var t,s;return this.chessboard.state.orientation===D.white?(t=this.borderSize+e%8*this.squareWidth,s=this.borderSize+(7-Math.floor(e/8))*this.squareHeight):(t=this.borderSize+(7-e%8)*this.squareWidth,s=this.borderSize+Math.floor(e/8)*this.squareHeight),{x:t,y:s}}}]),e}(),A="http://www.w3.org/2000/svg",z=function(){function e(){Object(w.a)(this,e)}return Object(y.a)(e,null,[{key:"createSvg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=document.createElementNS(A,"svg");return e&&(t.setAttribute("width","100%"),t.setAttribute("height","100%"),e.appendChild(t)),t}},{key:"addElement",value:function(e,t,s){var i=document.createElementNS(A,t);for(var a in"use"===t&&(s["xlink:href"]=s.href),s)if(s.hasOwnProperty(a))if(-1!==a.indexOf(":")){var r=a.split(":");i.setAttributeNS("http://www.w3.org/1999/"+r[0],r[1],s[a])}else i.setAttribute(a,s[a]);return e.appendChild(i),i}},{key:"removeElement",value:function(e){e.parentNode.removeChild(e)}}]),e}(),R=function(){function e(){Object(w.a)(this,e),this.squares=new Array(64).fill(null),this.orientation=void 0,this.markers=[],this.inputWhiteEnabled=!1,this.inputBlackEnabled=!1,this.inputEnabled=!1,this.squareSelectEnabled=!1}return Object(y.a)(e,[{key:"setPiece",value:function(e,t){this.squares[e]=t}},{key:"addMarker",value:function(e,t){this.markers.push({index:e,type:t})}},{key:"removeMarkers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.markers=e||t?this.markers.filter((function(s){if(s.type){if(e){if(s.type===t&&e===s.index)return!1}else if(s.type===t)return!1}else if(e===s.index)return!1;return!0})):[]}},{key:"setPosition",value:function(e){if(e)for(var t=e.replace(/^\s*/,"").replace(/\s*$/,"").split(/\/|\s/),s=0;s<8;s++)for(var i=t[7-s].replace(/\d/g,(function(e){for(var t=parseInt(e),s="",i=0;i<t;i++)s+="-";return s})),a=0;a<8;a++){var r=i.substr(a,1),n=null;"-"!==r&&(n=r.toUpperCase()===r?"w".concat(r.toLowerCase()):"b".concat(r)),this.squares[8*s+a]=n}}},{key:"getPosition",value:function(){for(var e=new Array(8).fill(""),t=0;t<8;t++){for(var s=0,i=0;i<8;i++){var a=this.squares[8*t+i];if(a){s>0&&(e[7-t]+=s,s=0);var r=a.substr(0,1),n=a.substr(1,1);e[7-t]+="w"===r?n.toUpperCase():n}else s++}s>0&&(e[7-t]+=s,s=0)}return e.join("/")}},{key:"squareToIndex",value:function(e){var t=e.substr(0,1).charCodeAt(0)-97;return 8*(e.substr(1,1)-1)+t}}]),e}(),D={white:"w",black:"b"},F={moveStart:"moveStart",moveDone:"moveDone",moveCanceled:"moveCanceled"},G="primary",B="secondary",H={none:"none",thin:"thin",frame:"frame"},W={frame:{class:"marker-frame",slice:"markerFrame"},square:{class:"marker-square",slice:"markerSquare"},dot:{class:"marker-dot",slice:"markerDot"},circle:{class:"marker-circle",slice:"markerCircle"}},Q="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",Y="8/8/8/8/8/8/8/8",U=function(){function e(t){var s=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object(w.a)(this,e),!t)throw new Error("container element is "+t);this.element=t;var a={position:"empty",orientation:D.white,style:{cssClass:"default",showCoordinates:!0,borderType:H.thin,aspectRatio:1,moveFromMarker:W.frame,moveToMarker:W.frame,moveMarker:W.frame,hoverMarker:W.frame},responsive:!0,animationDuration:300,sprite:{url:"./assets/images/chessboard-sprite-staunty.svg",size:40,cache:!0}};this.props={},Object.assign(this.props,a),Object.assign(this.props,i),this.props.sprite=a.sprite,this.props.style=a.style,i.sprite&&Object.assign(this.props.sprite,i.sprite),i.style&&Object.assign(this.props.style,i.style),this.props.style.moveMarker!==W.frame&&(console.warn("this.props.style.moveMarker is deprecated, use this.props.style.moveFromMarker"),this.props.style.moveFromMarker=this.props.style.moveMarker),this.props.style.hoverMarker!==W.frame&&(console.warn("this.props.style.hoverMarker is deprecated, use this.props.style.moveToMarker"),this.props.style.moveToMarker=this.props.style.hoverMarker),this.props.style.aspectRatio&&(this.element.style.height=this.element.offsetWidth*this.props.style.aspectRatio+"px"),this.state=new R,this.state.orientation=this.props.orientation,this.view=new L(this,(function(e){"start"===s.props.position?s.state.setPosition(Q):"empty"===s.props.position||void 0===s.props.position?s.state.setPosition(Y):s.state.setPosition(s.props.position),e.redraw()}))}return Object(y.a)(e,[{key:"setPiece",value:function(e,t){this.state.setPiece(this.state.squareToIndex(e),t),this.view.drawPieces(this.state.squares)}},{key:"getPiece",value:function(e){return this.state.squares[this.state.squareToIndex(e)]}},{key:"movePiece",value:function(e,t){var s=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise((function(a,r){var n=s.state.squares.slice(0),o=s.getPiece(e);o?(s.state.squares[s.state.squareToIndex(e)]=null,s.state.squares[s.state.squareToIndex(t)]=o,i?s.view.animatePieces(n,s.state.squares,(function(){a()})):(s.view.drawPieces(s.state.squares),a())):r("no piece on square "+e)}))}},{key:"setPosition",value:function(e){var t=this,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(i){"start"===e?e=Q:"empty"===e&&(e=Y);var a=t.state.getPosition();if(e.split(" ")[0]!==a){var r=t.state.squares.slice(0);t.state.setPosition(e),s?t.view.animatePieces(r,t.state.squares.slice(0),(function(){i()})):(t.view.drawPieces(t.state.squares),i())}else i()}))}},{key:"getPosition",value:function(){return this.state.getPosition()}},{key:"addMarker",value:function(e,t){t||console.error("Error addMarker(), type is "+t),this.state.addMarker(this.state.squareToIndex(e),t),this.view.drawMarkers()}},{key:"getMarkers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,s=[];return this.state.markers.forEach((function(i){var a=T[i.index];(!e&&(!t||t===i.type)||!t&&e===a||t===i.type&&e===a)&&s.push({square:T[i.index],type:i.type})})),s}},{key:"removeMarkers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,s=e?this.state.squareToIndex(e):void 0;this.state.removeMarkers(s,t),this.view.drawMarkers()}},{key:"setOrientation",value:function(e){return this.state.orientation=e,this.view.redraw()}},{key:"getOrientation",value:function(){return this.state.orientation}},{key:"destroy",value:function(){this.view.destroy(),this.view=void 0,this.state=void 0,this.squareSelectListener&&(this.element.removeEventListener("contextmenu",this.squareSelectListener),this.element.removeEventListener("mouseup",this.squareSelectListener),this.element.removeEventListener("touchend",this.squareSelectListener))}},{key:"enableMoveInput",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.view.enableMoveInput(e,t)}},{key:"disableMoveInput",value:function(){this.view.disableMoveInput()}},{key:"enableContextInput",value:function(e){console.warn("enableContextInput() is deprecated, use enableSquareSelect()"),this.enableSquareSelect((function(t){t.type===B&&e(t)}))}},{key:"disableContextInput",value:function(){this.disableSquareSelect()}},{key:"enableSquareSelect",value:function(e){this.squareSelectListener?console.warn("squareSelectListener already existing"):(this.squareSelectListener=function(t){var s=t.target.getAttribute("data-index");"contextmenu"!==t.type?e({chessboard:this,type:2===t.button?B:G,square:T[s]}):t.preventDefault()},this.element.addEventListener("contextmenu",this.squareSelectListener),this.element.addEventListener("mouseup",this.squareSelectListener),this.element.addEventListener("touchend",this.squareSelectListener),this.state.squareSelectEnabled=!0,this.view.setCursor())}},{key:"disableSquareSelect",value:function(){this.element.removeEventListener("contextmenu",this.squareSelectListener),this.element.removeEventListener("mouseup",this.squareSelectListener),this.element.removeEventListener("touchend",this.squareSelectListener),this.squareSelectListener=void 0,this.state.squareSelectEnabled=!1,this.view.setCursor()}}]),e}(),V=s(8),K=s.n(V),X=s.p+"static/media/Capture1.c0181c3c.mp3",J=s.p+"static/media/Check.9528d4c3.mp3",$=s.p+"static/media/Move.d013f4c2.mp3",Z=s.p+"static/media/Defeat.56db983e.mp3",ee=s.p+"static/media/Victory.34a71557.mp3",te={capture:new Audio(X),check:new Audio(J),move:new Audio($),defeat:new Audio(Z),victory:new Audio(ee)},se=s.p+"static/media/chessboard-sprite-staunty.6dba5963.svg",ie=void 0,ae=function(e){var t=document.querySelectorAll(e);return{addClass:function(e){t&&t.forEach((function(t){return t.classList.add(e)}))},removeClass:function(e){t&&t.forEach((function(t){return t.classList.remove(e)}))},html:function(e){t&&e&&(t[0].innerHTML=e)},text:function(e){t&&e&&(t[0].textContent=e)}}},re=function(e){e=e||{showEvaluation:!0};var t,s,i=new K.a,a=new Worker("/static/stockfish.min.js"),r=new Worker("/static/stockfish.min.js"),n={},o=!0,c={wtime:3e5,btime:3e5,winc:2e3,binc:0},l="white",d=null,h=!1,u=document.getElementById("evaluation"),m=te;function p(e,t){console.log("UCI: "+e),(t||a).postMessage(e)}function v(){var e="Engine: ";n.engineLoaded?n.engineReady?e+="ready.":e+="loaded...":e+="loading...",n.search&&(e=n.search,n.score&&o&&(e+=("Mate"===n.score.substr(0,4)?" ":" Score: ")+n.score)),u.textContent=e,ae("#eval").html(n.score)}function b(e,t){c.startTime>0&&e===c.clockColor&&(t=Math.max(0,t+c.startTime-Date.now()));var s=e===l?"#time2":"#time1",i=Math.ceil(t/1e3),a=Math.floor(i/60);i-=60*a;var r=Math.floor(a/60),n=r+":"+("0"+(a-=60*r)).slice(-2)+":"+("0"+i).slice(-2);ae(s).text(n)}function j(){b("white",c.wtime),b("black",c.btime),c.clockColor===l?(ae("#time2").addClass("clk__active"),ae("#time1").removeClass("clk__active")):c.clockColor&&(ae("#time1").addClass("clk__active"),ae("#time2").removeClass("clk__active"))}function f(){j();var e=("white"===c.clockColor?c.wtime:c.btime)+c.startTime-Date.now();d=setTimeout(f,e%1e3+1)}function x(){for(var e="",t=i.history({verbose:!0}),s=0;s<t.length;++s){var a=t[s];e+=" "+a.from+a.to+(a.promotion?a.promotion:"")}return e}function g(){var s;!function(){if(null!==d&&(clearTimeout(d),d=null),c.startTime>0){var e=Date.now()-c.startTime;c.startTime=null,"white"===c.clockColor?c.wtime=Math.max(0,c.wtime-e):c.btime=Math.max(0,c.btime-e)}}(),ae("#pgn").html((s=i.pgn())?(s=s.replace(/\d+\./g,"<span class='text_muted'>$&</span>")).replace(/N/g,"\u265e").replace(/Q/g,"\u265b").replace(/B/g,"\u265d").replace(/R/g,"\u265c").replace(/K/g,"\u265a"):""),t.setPosition(i.fen(),!1),j();var a="w"===i.turn()?"white":"black";i.game_over()||(p("position startpos moves"+x()),a!==l&&(e.showEvaluation&&(p("position startpos moves"+x(),r),u.textContent="",p("eval",r)),c&&c.wtime?p("go "+(c.depth?"depth "+c.depth:"")+" wtime "+c.wtime+" winc "+c.winc+" btime "+c.btime+" binc "+c.binc):p("go "+(c.depth?"depth "+c.depth:"")),h=!0),i.history().length>=1&&!c.depth&&!c.nodes&&("w"===i.turn()?(c.wtime+=c.winc,c.clockColor="white"):(c.btime+=c.binc,c.clockColor="black"),c.startTime=Date.now(),f()))}setInterval((function(){s||i.game_over()&&(s=!0,alert("Game Over"),ae("#eval").html("-"))}),1e3),p("uci"),r.onmessage=function(e){var t;if(t=e&&"object"===typeof e?e.data:e,console.log("evaler: "+t),"uciok"!==t&&"readyok"!==t&&"option name"!==t.substr(0,11)){u.textContent&&(u.textContent+="\n");var s=t.match(/^Total evaluation: (\d+(?:\.\d+)?)/);s&&(u.textContent=s[1])}},a.onmessage=function(t){var s;if(t&&"object"===typeof t?(s=t.data,console.log(s)):s=t,console.log("Reply: "+s),"uciok"===s)n.engineLoaded=!0;else if("readyok"===s)n.engineReady=!0;else{var a=s.match(/^bestmove ([a-h][1-8])([a-h][1-8])([qrbn])?/);if(a){h=!1;var o=i.move({from:a[1],to:a[2],promotion:a[3]});o&&(k(a[1],a[2]),o.flags.includes("c")?m.capture.play():m.move.play()),g(),e.showEvaluation&&(p("eval",r),u.textContent="")}else(a=s.match(/^info .*\bdepth (\d+) .*\bnps (\d+)/))&&(n.search="Depth: "+a[1]+" Nps: "+a[2]);if(a=s.match(/^info .*\bscore (\w+) (-?\d+)/)){var c=parseInt(a[2])*("w"===i.turn()?1:-1);"cp"===a[1]?n.score=(c/100).toFixed(2):"mate"===a[1]&&(n.score="#"+Math.abs(c))}}v()};var k=function(e,s){t.removeMarkers(void 0,W.square),t.addMarker(e,W.square),t.addMarker(s,W.square)},w={position:"start",orientation:D.white,style:{cssClass:"default",showCoordinates:!0,borderType:H.thin,aspectRatio:1,moveFromMarker:W.frame,moveToMarker:W.frame},responsive:!0,animationDuration:300,sprite:{url:se,size:40,cache:!0}};return(t=new U(document.getElementById("board"),w)).enableMoveInput((function(e){switch(e.type){case F.moveStart:return!0;case F.moveDone:return function(e,t){var s=i.move({from:e,to:t});return s&&(k(e,t),s.flags.includes("c")?m.capture.play():m.move.play()),null!==s&&(g(),!0)}(e.squareFrom,e.squareTo);case F.moveCanceled:}}),D.white),{flip:function(){var e=t.getOrientation()==D.white?D.black:D.white;t.setOrientation(e)},reset:function(){i.reset(),p("setoption name Contempt value 0"),ie.setSkillLevel(0),p("setoption name King Safety value 0")},loadPgn:function(e){i.load_pgn(e)},setPlayerColor:function(e){l=e,t.orientation(l)},setSkillLevel:function(e){var t;e<0&&(e=0),e>20&&(e=20),c.level=e,c.depth=e<5?"1":e<10?"2":e<15?"3":"",p("setoption name Skill Level value "+e),t=Math.round(6.35*e+1),p("setoption name Skill Level Maximum Error value "+Math.round(-.5*e+10)),p("setoption name Skill Level Probability value "+t)},setTime:function(e,t){c={wtime:1e3*e,btime:1e3*e,winc:1e3*t,binc:1e3*t}},setDepth:function(e){c={depth:e}},setNodes:function(e){c={nodes:e}},setContempt:function(e){p("setoption name Contempt value "+e)},setAggressiveness:function(e){p("setoption name Aggressiveness value "+e)},setDisplayScore:function(e){o=e,v()},start:function(){p("ucinewgame"),p("isready"),n.engineReady=!1,n.search=null,v(),g(),s=!1},undo:function(){return!h&&(i.undo(),i.undo(),n.search=null,v(),g(),!0)},replay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,s=0,a=i.history();i.reset(),t.setPosition(i.fen());var r=function(){s<a.length?(i.move(a[s]),t.setPosition(i.fen())):clearInterval(n),s+=1},n=setInterval(r,e)}}};var ne=function(){var e=a.a.useState({player2:{profileImage:"assets/av.jpeg",username:"stockfish",time:10,id:"1"},player1:{profileImage:"assets/av.jpeg",username:"Player 1",time:10,id:"2"}}),t=Object(g.a)(e,1)[0],s=a.a.useState({isPlaying:!1,isGameOver:!1,orientation:"white"}),i=Object(g.a)(s,2),r=i[0],n=i[1],o=a.a.useRef();a.a.useEffect((function(){o.current=re()}),[]);var c=a.a.useState({id:0,name:"moves"}),l=Object(g.a)(c,2),d=l[0],h=l[1];return Object(j.jsxs)("div",{className:"game two_column_layout",children:[Object(j.jsxs)("div",{className:"two_column_layout__item",children:[Object(j.jsx)(k,{user:"white"===r.orientation?t.player1:t.player2}),Object(j.jsx)("div",{className:"board__container",children:Object(j.jsx)("div",{id:"board"})}),Object(j.jsx)(k,{user:"white"===r.orientation?t.player2:t.player1})]}),Object(j.jsxs)("div",{className:"controls two_column_layout__item",children:[Object(j.jsxs)("div",{className:"controls_top",children:[Object(j.jsx)("span",{id:"eval",children:" "})," ",Object(j.jsxs)("div",{children:[" ",d.name," "]}),Object(j.jsxs)("div",{className:"tab_controls",children:[Object(j.jsx)("span",{className:"material-icons ".concat(1===d.id?"tab_control_active":""),title:"replay",onClick:function(){return h({id:1,name:"Game information"})},children:"info"}),Object(j.jsx)("span",{className:"material-icons ".concat(0===d.id?"tab_control_active":""),title:"replay",onClick:function(){return h({id:0,name:"Game name"})},children:"description"}),Object(j.jsx)("span",{className:"material-icons ".concat(2===d.id?"tab_control_active":""),title:"replay",onClick:function(){return h({id:2,name:"Game analysis"})},children:"legend_toggle"})]})]}),Object(j.jsx)("div",{className:"controls_bottom",children:Object(j.jsxs)("div",{className:"tab_items",children:[Object(j.jsx)("div",{className:"move__items absolute ".concat(0===d.id?"tab_active":""),id:"pgn",children:"no move made yet"}),Object(j.jsxs)("div",{className:"game_info ".concat(1===d.id?"tab_active":""),id:"engineStatus",children:[Object(j.jsxs)("div",{children:[t.player1.username," ",Object(j.jsx)("span",{className:"white",children:" "})," vs \xa0 \xa0 ",t.player2.username,Object(j.jsx)("span",{className:"black",children:" "}),Object(j.jsx)("span",{id:"result",children:" 1 - 0 "})]}),Object(j.jsx)("div",{children:Object(j.jsx)("small",{className:"my-0",children:" Replay the game "})}),Object(j.jsx)("div",{className:"text_center",children:Object(j.jsxs)("div",{children:[Object(j.jsxs)("button",{onClick:function(){return o.current.replay(1e3)},children:[" ","slow"," "]}),Object(j.jsxs)("button",{onClick:function(){return o.current.replay(700)},children:[" ","realtime"," "]}),Object(j.jsxs)("button",{onClick:function(){return o.current.replay(500)},children:[" ","fast"," "]})]})})]}),Object(j.jsx)("div",{className:"absolute ".concat(2===d.id?"tab_active":""),id:"evaluation",children:"evaluation"})]})}),Object(j.jsxs)("div",{className:"game-controls",onScroll:function(e){return e.preventDefault()},children:[Object(j.jsx)("span",{onClick:function(){return o.current.undo()},className:"material-icons",title:"undo",children:"undo"}),Object(j.jsx)("span",{onClick:function(){o.current.flip(),n(Object(x.a)(Object(x.a)({},r),{},{orientation:"white"===r.orientation?"black":"white"}))},children:Object(j.jsx)("svg",{width:"20",height:"20",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",children:Object(j.jsx)("path",{d:"M5 6.09v12l-1.29-1.3a1 1 0 0 0-1.42 1.42l3 3a1 1 0 0 0 1.42 0l3-3a1 1 0 0 0 0-1.42a1 1 0 0 0-1.42 0L7 18.09v-12A1.56 1.56 0 0 1 8.53 4.5H11a1 1 0 0 0 0-2H8.53A3.56 3.56 0 0 0 5 6.09zm9.29-.3a1 1 0 0 0 1.42 1.42L17 5.91v12a1.56 1.56 0 0 1-1.53 1.59H13a1 1 0 0 0 0 2h2.47A3.56 3.56 0 0 0 19 17.91v-12l1.29 1.3a1 1 0 0 0 1.42 0a1 1 0 0 0 0-1.42l-3-3a1 1 0 0 0-1.42 0z",fill:"currentColor"})})}),Object(j.jsx)("span",{className:"material-icons",children:" skip_previous "}),Object(j.jsx)("span",{className:"material-icons",children:" skip_next "})]})]})]})};s(29),s(30);var oe=function(){var e=a.a.useRef();return a.a.useEffect((function(){e.current=new U(document.getElementById("board"))})),Object(j.jsxs)("div",{className:"home two_column_layout",children:[Object(j.jsx)("div",{className:"board__section two_column_layout__item",children:Object(j.jsx)("div",{className:"board__container",children:Object(j.jsx)("div",{id:"board"})})}),Object(j.jsxs)("div",{className:"home__info two_column_layout__item",children:[Object(j.jsx)("h1",{className:"text_center",children:"Puzzle of the day"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{className:"home__btn_primary mx_auto",children:"Solve"}),Object(j.jsx)("button",{className:"home__btn_secondary mx_auto",children:"Learn"})]})]})]})},ce=(s(31),function(){function e(t){Object(w.a)(this,e),this.moves=[];var s=t.split(",");this.puzzleId=s[0],this.fen=s[1],this.moves=s[2].split(/\s+/),this.rating=s[3],this.ratingDeviation=s[4],this.popularity=s[5],this.nbPlays=s[6],this.themes=s[7],this.gameUr=s[8],this.currentMove=0}return Object(y.a)(e,[{key:"getCurrentMove",value:function(){var e=this.moves[this.currentMove].match(/([a-h][1-8])([a-h][1-8])([qrbn])?/);return{from:e[1],to:e[2],promotion:e[3]}}},{key:"complete",value:function(){return this.currentMove===this.moves.length}}]),e}()),le=s.p+"static/media/wK.1fe87bb0.svg",de=s.p+"static/media/bK.b68dab78.svg";var he=function(){var e=a.a.useRef(),t=a.a.useState("Your turn"),s=Object(g.a)(t,2),i=s[0],r=s[1],n=new ce("0000D,5rk1/1p3ppp/pq3b2/8/8/1P1Q1N2/P4PPP/3R2K1 w - - 2 27,d3d6 f8d8 d6d8 f6d8,1521,73,96,8483,advantage endgame,https://lichess.org/F8M8OS71#53"),o=a.a.useState(!1),c=Object(g.a)(o,2),l=c[0],d=c[1],h=K()(n.fen);h.move(n.getCurrentMove()),n.currentMove+=1;var u=a.a.useState(h.turn()),m=Object(g.a)(u,1)[0],p=a.a.useState({}),v=Object(g.a)(p,2),b=v[0],f=v[1],x=function(t,s){e.current.removeMarkers(void 0,W.square),e.current.addMarker(t,W.square),e.current.addMarker(s,W.square)},k={setPosition:"start",orientation:D.white,style:{cssClass:"default",showCoordinates:!0,borderType:H.thin,aspectRatio:1,moveFromMarker:W.frame,moveToMarker:W.frame},responsive:!0,animationDuration:300,sprite:{url:se,size:40,cache:!0}};return a.a.useEffect((function(){return e.current=new U(document.getElementById("board"),k),e.current.setOrientation(m),e.current.setPosition(h.fen()),e.current.enableMoveInput((function(t){switch(t.type){case F.moveStart:return!0;case F.moveDone:return function(t,s){var i=h.move({from:t,to:s});if(!i)return!1;var a=n.getCurrentMove();if(f(i),a.from+a.to!==t+s)return r("Incorrect"),h.undo(),!1;x(a.from,a.to),n.currentMove+=1,r("Correct"),e.current.setPosition(h.fen(),!1),n.complete()||setTimeout((function(){var t=h.move(n.getCurrentMove());e.current.setPosition(h.fen(),!1),x(t.from,t.to),n.currentMove+=1}),300),d(n.complete())}(t.squareFrom,t.squareTo);case F.moveCanceled:}}),m),function(){e.current.destroy()}}),[]),Object(j.jsxs)("div",{className:"puzzle two_column_layout",children:[Object(j.jsx)("div",{className:"board__section two_column_layout__item",children:Object(j.jsx)("div",{className:"board__container",children:Object(j.jsx)("div",{id:"board"})})}),Object(j.jsxs)("div",{className:"puzzle__info align_self_stretch b_dark two_column_layout__item d_flex flex_column",children:[Object(j.jsxs)("div",{className:"puzzle__top ".concat("Correct"===i?"good":"Incorrect"===i?"bad":""),children:["Correct"===i&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{className:"material-icons",children:"done"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:"".concat(b.san," Is correct")}),Object(j.jsx)("small",{children:l?"Sucess!":"keep going.."})]})]}),"Incorrect"===i&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{className:"material-icons",children:"close"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:"".concat(b.san," Incorrect ")}),Object(j.jsx)("small",{children:"try again"})]})]}),"Your turn"===i&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("img",{src:"w"===m?le:de,alt:"".concat(m," to move"),className:"piece_icon"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:"Your turn"}),Object(j.jsx)("small",{children:"w"===m?"white to play":"black to play"})]})]}),"Retry"===i&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{className:"material-icons",children:"autorenew"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:"Retry"}),Object(j.jsx)("small",{children:"try again"})]})]})]}),Object(j.jsx)("div",{className:"expand",children:Object(j.jsxs)("div",{className:"card_dark",children:[Object(j.jsxs)("div",{className:"d_flex align_items_center justify_content_between",children:[Object(j.jsx)("h3",{children:"Opening"}),Object(j.jsx)("span",{className:"material-icons",children:"keyboard_double_arrow_right"})]}),Object(j.jsx)("span",{className:"text__muted",children:"lorem"})]})}),Object(j.jsxs)("div",{className:"d_flex",children:[l?Object(j.jsx)("button",{className:"active expand light_btn",children:Object(j.jsx)("span",{className:"material-icons",children:"east"})}):Object(j.jsxs)("button",{onClick:function(){h.move(n.getCurrentMove()),e.current.position(h.fen(),!1),n.currentMove+=1,r("Retry"),d(!0)},className:"expand d_flex justify_content_center align_items_center",children:[Object(j.jsx)("span",{className:"material-icons",children:"help_outline"}),"\xa0 view solution"]}),Object(j.jsx)("button",{children:Object(j.jsx)("span",{className:"material-icons",children:"info"})}),Object(j.jsx)("button",{children:Object(j.jsx)("span",{className:"material-icons",children:"settings"})})]}),Object(j.jsxs)("div",{className:"tool_bar",children:[Object(j.jsx)("span",{className:"material-icons",children:"settings"}),Object(j.jsx)("span",{className:"material-icons",children:"settings"})]})]})]})},ue=s(2),me=s(14);s(16);var pe=function(){var e=Object(ue.f)();return Object(j.jsxs)("div",{className:"practice",children:[Object(j.jsx)("h2",{className:"text_center",children:"Practice"}),Object(j.jsx)("div",{className:"text_center text_muted",children:"Improve your chess by solving puzzles"}),Object(j.jsx)("div",{className:"practice__categories",children:Object.keys(me).map((function(t,s){return Object(j.jsxs)(a.a.Fragment,{children:[Object(j.jsx)("h2",{className:"category_name text_muted",children:t}),Object(j.jsx)("div",{className:"category__items c".concat(s),children:me[t].map((function(t,s){return Object(j.jsx)(ve,{item:t,onClick:function(){e({pathname:b,search:"",hash:"",state:{fromPopup:!0}})}})}))})]},s)}))})]})},ve=function(e){var t=e.item,s=e.onClick;return Object(j.jsx)("div",{className:"col-lg-3 col-md-2 col-12",onClick:s,children:Object(j.jsxs)("div",{className:"practice__card ",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"practice__card__title",children:t.name}),Object(j.jsx)("div",{className:"text_muted",children:t.description})]}),Object(j.jsx)("div",{children:Object(j.jsx)("span",{className:"material-icons",children:"arrow_forward_ios"})})]})})},be=s(10),je=s.p+"static/media/wR.945bc261.svg",fe=s.p+"static/media/wN.b09c8880.svg",xe=s.p+"static/media/wB.987ef67f.svg",ge=s.p+"static/media/wK.1fe87bb0.svg",ke=s.p+"static/media/wQ.5855fbef.svg",we=s.p+"static/media/wP.ea86bf88.svg",ye=s.p+"static/media/bR.ff8849ae.svg",Oe=s.p+"static/media/bN.d9247056.svg",_e=s.p+"static/media/bB.0a6a98a0.svg",Me=s.p+"static/media/bK.b68dab78.svg",Ce=s.p+"static/media/bQ.1161205c.svg",Se=s.p+"static/media/bP.a71ad306.svg",Ie=function(e){return{wb:xe,wk:ge,wn:fe,wp:we,wr:je,wq:ke,bb:_e,br:ye,bk:Me,bq:Ce,bp:Se,bn:Oe}[e]};var Pe=function(){var e=Object(ue.f)();return Object(j.jsxs)("div",{className:"practice basic",children:[Object(j.jsx)("h2",{className:"text_center",children:"Practice"}),Object(j.jsx)("div",{className:"text_center text_muted",children:"Improve your chess by solving puzzles"}),Object(j.jsx)("div",{className:"practice__categories",children:Object.keys(be).map((function(t,s){return Object(j.jsxs)(a.a.Fragment,{children:[Object(j.jsx)("h2",{className:"category_name text_muted",children:t}),Object(j.jsx)("div",{className:"category__items c".concat(s),children:be[t].map((function(t,s){return Object(j.jsx)(Ne,{item:t,onClick:function(){e({pathname:b,search:"",hash:"",state:{fromPopup:!0}})}})}))})]},s)}))})]})},Ne=function(e){var t=e.item,s=e.onClick;return Object(j.jsx)("div",{className:"col-lg-3 col-md-2 col-12",onClick:s,children:Object(j.jsxs)("div",{className:"practice__card ",children:[Object(j.jsx)("div",{children:Object(j.jsx)("img",{src:Ie(t.icon),alt:t.name,className:"practice_icon"})}),Object(j.jsxs)("div",{className:"expand",children:[Object(j.jsx)("div",{className:"practice__card__title",children:t.name}),Object(j.jsx)("div",{className:"text_muted",children:t.description})]}),Object(j.jsx)("span",{className:"material-icons",children:"arrow_forward_ios"})]})})},qe=s(18),Ee=function(e){var t=e.substr(0,1).charCodeAt(0)-97;return 8*(e.substr(1,1)-1)+t},Te=function(e,t,s,i){var a=t.x,r=s.x,n=t.y,o=s.y;a===r?(a+=i/2,r+=i/2,o+=(n+=i/2)>o?i:0):(r+=(a+=i/2)>r?i:0,n+=i/2,o+=i/2);var c=document.createElementNS("http://www.w3.org/2000/svg","line");c.setAttribute("id","line2"),c.setAttribute("x1",a),c.setAttribute("y1",n),c.setAttribute("x2",r),c.setAttribute("y2",o),c.setAttribute("stroke","#e8353566 "),c.setAttribute("marker-end","url(#arrowhead)"),c.setAttribute("stroke-width","10"),c.setAttribute("stroke-linecap","round"),e.appendChild(c)};var Le=function(){var e,t,s=a.a.useRef(),i=[],r=a.a.useRef(),n=K()(),o=a.a.useState(0),c=Object(g.a)(o,2),l=c[0],d=c[1],h=function e(){s.current.removeMarkers(void 0,void 0);var i=n.moves({verbose:!0}),a=i[Math.floor(Math.random()*i.length)],r=n.remove(a.from);i.map((function(e){s.current.addMarker(e.to,W.circle)})),setTimeout((function(){n.put(r,a.to),s.current.setPosition(n.fen()),s.current.addMarker(a.from,W.square),s.current.addMarker(a.to,W.square),setTimeout((function(){s.current.removeMarkers(void 0,W.circle)}),300)}),1500),t=window.setTimeout(e,3e3)},u=function(t,i){var a=n.moves({square:t,verbose:!0});s.current.removeMarkers(void 0,W.dot),i===e&&s.current.removeMarkers(void 0,W.circle);for(var r=0;r<a.length;r++)if(i===a[r].to){var o=n.remove(t);return n.put(o,i),te.move.play(),!0}return!1},m="Movement",p=qe;return a.a.useEffect((function(){var a={setPosition:"start",orientation:D.white,style:{cssClass:"default",showCoordinates:!0,borderType:H.thin,aspectRatio:1,moveFromMarker:W.frame,moveToMarker:W.frame},responsive:!0,animationDuration:300,sprite:{url:se,size:40,cache:!0}},o=p.lessons[l].fen;if(n.load(o),s.current=new U(document.getElementById("board"),a),s.current.setPosition(n.fen()),!1!==p.lessons[l].action&&s.current.enableMoveInput((function(e){switch(e.type){case F.moveStart:return function(e){var t=n.moves({square:e,verbose:!0});s.current.removeMarkers(void 0,W.dot),t.forEach((function(e){return s.current.addMarker(e.to,W.dot)}))}(e.square),!0;case F.moveDone:return u(e.squareFrom,e.squareTo);case F.moveCanceled:}}),D.white),r.current=document.createElementNS("http://www.w3.org/2000/svg","g"),"random_move"===p.lessons[l].action)t=window.setTimeout(h,2e3);else if("try_easy"===p.lessons[l].action){var c=n.moves({verbose:!0}),d=c[Math.floor(Math.random()*c.length)];(e=d.to)&&s.current.addMarker(e,W.circle),i=[{from:d.from,to:d.to}]}else if("try_hard"===p.lessons[l].action){if(p.lessons[l].moveTo)e=p.lessons[l].moveTo;else{var m=n.moves({verbose:!0});e=m[Math.floor(Math.random()*m.length)].to}s.current.addMarker(e,W.circle)}return r.current.setAttribute("class","arrows"),s.current.view.svg.appendChild(r.current),r.current.querySelectorAll("line").forEach((function(e){r.current.removeChild(e)})),i.forEach((function(e){var t=s.current.view.squareIndexToPoint(Ee(e.from)),i=s.current.view.squareIndexToPoint(Ee(e.to));Te(r.current,t,i,s.current.view.squareWidth)})),function(){s.current.destroy(),window.clearTimeout(t)}}),[l]),Object(j.jsxs)("div",{className:"practice two_column_layout",children:[Object(j.jsxs)("div",{className:"board__section two_column_layout__item",children:[Object(j.jsxs)("ul",{className:"page",children:[Object(j.jsx)("li",{className:"page__btn",onClick:function(){d(Math.max(l-1,0))},children:Object(j.jsx)("span",{className:"material-icons",children:"chevron_left"})}),p.lessons.map((function(e,t){return Object(j.jsx)("li",{onClick:function(){return function(e){d(e)}(t)},className:"page__numbers ".concat(l===t?"active_item":""," "),children:t+1})})),Object(j.jsx)("li",{className:"page__btn",onClick:function(){d(Math.min(l+1,p.lessons.length-1))},children:Object(j.jsx)("span",{className:"material-icons",children:"chevron_right"})})]}),Object(j.jsx)("div",{className:"board__container",children:Object(j.jsx)("div",{id:"board"})}),Object(j.jsx)("p",{className:"description",children:Object(j.jsx)("span",{children:p.lessons[l].instruction})})]}),Object(j.jsxs)("div",{className:"two_column_layout__item lessons_info",children:[Object(j.jsxs)("div",{className:"lessons_info__top",children:[Object(j.jsx)("img",{src:Ie("wr"),className:"piece_icon"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{className:"d_block",children:p.name}),Object(j.jsx)("small",{children:p.description})]})]}),Object(j.jsx)("div",{children:Object.keys(be).map((function(e,t){return Object(j.jsxs)("div",{className:"tile ".concat(e===m?"active_tile":""),onClick:function(){return function(e){var t=document.querySelector(".list__expand");document.querySelector("#item-".concat(e," ul")).classList.replace("colapsed","list__expand"),t&&t.classList.replace("list__expand","colapsed")}(t)},id:"item-".concat(t),children:[console.log(m),Object(j.jsx)("div",{children:e}),Object(j.jsx)("ul",{className:"colapsed ",children:be[e].map((function(e){return Object(j.jsx)("li",{children:e.name})}))})]},t)}))})]})]})},Ae=s(11),ze="move",Re="erase",De="mark",Fe=function(){function e(t){var s=this;Object(w.a)(this,e),this.arrowMarkers=[],this.editMode=ze,this.fen=t.fen,this.marker={markerType:W.circle};var i={position:this.fen||"start",orientation:D.white,style:{cssClass:"default",showCoordinates:!0,borderType:H.thin,aspectRatio:1,moveFromMarker:W.frame,moveToMarker:W.frame},responsive:!0,animationDuration:300,sprite:{url:se,size:40,cache:!0}};this.board=new U(document.getElementById(t.eleId),i),this.arrowMarkersGroup=document.createElementNS("http://www.w3.org/2000/svg","g"),this.arrowMarkersGroup.setAttribute("class","arrows"),this.board.view.svg.appendChild(this.arrowMarkersGroup),this.board.enableMoveInput((function(e){if(s.editMode!==ze)return!1;switch(e.type){case F.moveStart:case F.moveDone:return!0;case F.moveCanceled:}})),this.board.enableSquareSelect((function(e){s.editMode===De?s.board.getMarkers(e.square,s.marker.markerType).length>0?s.board.removeMarkers(e.square,s.marker.markerType):s.board.addMarker(e.square,s.marker.markerType):(s.board.removeMarkers(void 0,W.circle),s.editMode===Re?s.board.setPiece(e.square,null):s.editMode===ze||s.board.setPiece(e.square,s.editMode),t.onboardChange(s.board.getPosition()))}))}return Object(y.a)(e,[{key:"setEditMode",value:function(e){this.editMode=e}},{key:"setMarker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.marker.markerType=W[t],this.marker.color=e,console.log(t)}},{key:"drawMarker",value:function(){}}]),e}(),Ge=Fe;s(32);var Be=function(){var e={color:"w",enPassant:"-",fullMove:"1",halfMove:"0",bCL:"q",bCS:"k",wCL:"Q",wCS:"K",casling:"KQkq"},t=a.a.useState({Q:"Q",K:"K",q:"q",k:"k"}),s=Object(g.a)(t,2),i=s[0],r=s[1],n=function(e){var t=e.target.value;r(Object(x.a)(Object(x.a)({},i),{},Object(Ae.a)({},t,e.target.checked?t:""))),f(o.current.board.getPosition())},o=a.a.useRef(),c=a.a.useState(),l=Object(g.a)(c,2),d=l[0],h=l[1],u=a.a.useState(),m=Object(g.a)(u,2),p=m[0],v=m[1],b=function(e){h(e),o.current.setEditMode(e)},f=function(t){var s=e,a="".concat(i.K).concat(i.Q).concat(i.k).concat(i.q);return console.log(i),[t,s.color,a||"-",s.enPassant,s.halfMove,s.fullMove].join("  ")},k=function(e){v(f(e))};return a.a.useEffect((function(){var e={eleId:"board",fen:null,onboardChange:k};o.current=new Ge(e);var t=o.current.board.getPosition();return v(f(t)),h(ze),function(){return o.current.board.destroy()}}),[]),Object(j.jsxs)("div",{className:"practice two_column_layout editor",children:[Object(j.jsx)("div",{className:"board__section two_column_layout__item",children:Object(j.jsx)("div",{className:"board__container",children:Object(j.jsx)("div",{id:"board"})})}),Object(j.jsx)("div",{}),Object(j.jsxs)("div",{className:"align_self_stretch b_dark two_column_layout__item d_flex flex_column",children:[Object(j.jsxs)("div",{className:"d_flex justify_content_between edit_mode",children:[Object(j.jsx)("button",{className:"expand ".concat(d===ze?"active":""," "),onClick:function(){return b(ze)},children:"Move"}),Object(j.jsx)("button",{className:"expand ".concat(d===Re?"active":""," "),onClick:function(){return b(Re)},children:"Erase"})]}),Object(j.jsxs)("div",{className:"pieces ",children:[Object(j.jsx)("div",{className:"d_flex justify_content_between",children:["wk","wq","wr","wb","wn","wp"].map((function(e){return Object(j.jsx)("button",{onClick:function(){return b(e)},className:"expand ".concat(d===e?"active":""," "),children:Object(j.jsx)("img",{src:Ie(e),className:"piece_icon"},e)})}))}),Object(j.jsx)("div",{className:"d_flex justify_content_between",children:["bk","bq","br","bb","bn","bp"].map((function(e){return Object(j.jsx)("button",{onClick:function(){return b(e)},className:"expand ".concat(d===e?"active":""," "),children:Object(j.jsx)("img",{src:Ie(e),className:"piece_icon"},e)})}))})]}),Object(j.jsxs)("div",{className:"game_status",children:[Object(j.jsxs)("div",{className:"d_flex",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("input",{onChange:n,id:"w-0-0",type:"checkbox",defaultChecked:!0,value:"K"}),Object(j.jsx)("label",{htmlFor:"w-0-0",children:"White O-O"})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("input",{onChange:n,id:"w-0-0-0",type:"checkbox",defaultChecked:!0,value:"Q"}),Object(j.jsx)("label",{htmlFor:"w-0-0-0",children:"White O-O-O"})]})]}),Object(j.jsxs)("div",{className:"d_flex",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("input",{onChange:n,id:"b-0-0",type:"checkbox",defaultChecked:!0,value:"k"}),Object(j.jsx)("label",{htmlFor:"b-0-0",children:"Black O-O"})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("input",{onChange:n,id:"b-0-0-0",type:"checkbox",defaultChecked:!0,value:"q"}),Object(j.jsx)("label",{htmlFor:"b-0-0-0",children:"Black O-O-O"})]})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("h5",{className:"to_play",children:"To Play"}),Object(j.jsxs)("div",{className:"d_flex",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("input",{type:"radio",checked:!0,id:"w",name:"toPlay",value:"w"}),Object(j.jsx)("label",{for:"w",children:"White"})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("input",{type:"radio",id:"",name:"toPlay",value:"b"}),Object(j.jsx)("label",{for:"b",children:"black"})]})]})]})]}),Object(j.jsxs)("div",{className:"mark",children:[Object(j.jsxs)("div",{className:"d_flex",children:[Object(j.jsx)("button",{className:"expand ".concat(d===De?"active":""," "),onClick:function(){return b(De)},children:"Add Markers"}),Object(j.jsx)("button",{className:"delete_btn",onClick:function(){return b(De)},children:"Clear Markers"})]}),Object(j.jsxs)("div",{className:"".concat(d!==De?"hidden":""," d_flex mark_options"),children:[Object(j.jsxs)("div",{className:"d_flex flex_column justify_content_center align_items_center",children:[Object(j.jsx)("label",{htmlFor:"color",children:"Marker Color"}),Object(j.jsx)("input",{type:"color",id:"color",value:"#42ba96"})]}),Object(j.jsxs)("div",{className:"expand d_flex flex_column justify_content_center align_items_center",children:[Object(j.jsx)("label",{htmlFor:"mark_type",children:"Marker Type"}),Object(j.jsxs)("select",{className:"w_100",name:"cars",id:"mark_type",onChange:function(e){o.current.setMarker("",e.target.value)},children:[Object(j.jsx)("option",{value:"arrow",children:"\u2192 Arrow"}),Object(j.jsx)("option",{selected:!0,value:"circle",children:"\u25ef Circle"}),Object(j.jsx)("option",{value:"dot",children:"\u2b24 Dot"}),Object(j.jsx)("option",{value:"frame",children:"\u25a2 Frame"})]})]})]})]}),Object(j.jsx)("div",{className:"d-flex fen",children:Object(j.jsxs)("div",{className:"d_flex align_items_center w_100 ",children:[Object(j.jsx)("input",{className:"w_100",value:p}),Object(j.jsx)("button",{children:"Share"})]})})]})]})};s(33),s(34);var He=function(){return Object(j.jsxs)(f,{children:[Object(j.jsxs)("svg",{height:"0",width:"0",children:[Object(j.jsx)("defs",{children:Object(j.jsx)("marker",{id:"arrowhead",markerWidth:"3",markerHeight:"3.5",refX:"0",refY:"1.75",orient:"auto",children:Object(j.jsx)("polygon",{points:"0 0, 3 1.75, 0 3.5",fill:"#e8353566 ",stroke:"none"})})}),Object(j.jsxs)("g",{id:"anotation",transform:"",children:[Object(j.jsx)("circle",{cx:"12",cy:"12",r:"12"}),Object(j.jsx)("path",{fill:"#fff",d:"M9 21.035l-9-8.638 2.791-2.87 6.156 5.874 12.21-12.436 2.843 2.817z"})," "]})]}),Object(j.jsxs)(ue.c,{children:[Object(j.jsx)(ue.a,{path:l,element:Object(j.jsx)(ne,{})}),Object(j.jsx)(ue.a,{path:d,element:Object(j.jsx)(he,{})}),Object(j.jsx)(ue.a,{path:h,element:Object(j.jsx)(pe,{})}),Object(j.jsx)(ue.a,{path:u,element:Object(j.jsx)(Pe,{})}),Object(j.jsx)(ue.a,{path:b,element:Object(j.jsx)(Le,{})}),Object(j.jsx)(ue.a,{path:c,element:Object(j.jsx)(oe,{})}),Object(j.jsx)(ue.a,{path:p,element:Object(j.jsx)(Be,{})})]})]})},We=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,36)).then((function(t){var s=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,n=t.getTTFB;s(e),i(e),a(e),r(e),n(e)}))};n.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(o.a,{children:Object(j.jsx)(He,{})})}),document.getElementById("root")),We()}],[[35,1,2]]]);
//# sourceMappingURL=main.84be5d8e.chunk.js.map